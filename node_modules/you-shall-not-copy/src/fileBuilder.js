const fs = require('fs');
const path = require('path');

function createFolderIfNotExists(folderPath) {
    const fullPath = path.resolve(folderPath);
    if (!fs.existsSync(fullPath)) {
        fs.mkdirSync(fullPath, { recursive: true });
        console.log(`üßô‚Äç‚ôÇÔ∏è Folder created: ${folderPath} ‚úÖ`);
    }
    else {
        console.log(`üßô‚Äç‚ôÇÔ∏è Folder already exists: ${folderPath}`);
    }
}

function createComponentFile(componentPath, componentName, fileExtension) {
    const filePath = path.join(componentPath, `${componentName}.${fileExtension}`);

    // check if file already exists
    if (!fs.existsSync(filePath)) {
        // if file is .css the content will be empty
        let content = '';

        // if file is .jsx
        if (fileExtension === 'jsx') {
            // read boilerplate from template
            console.log('creating .jsx file with a beautiful template...');
            const templatePath = path.resolve(__dirname, 'templates', 'component.jsx');
            content = fs.readFileSync(templatePath, "utf8").replace(/__COMPONENT_NAME__/g, componentName);
        }

        fs.writeFileSync(filePath, content);
        console.log(`üßô‚Äç‚ôÇÔ∏è File ${componentName}.${fileExtension} created ‚úÖ`);
    }
    else {
        console.log(`üßô‚Äç‚ôÇÔ∏è File ${componentName}.${fileExtension} already exists, fool-dev!`);
    }
}

module.exports = {
    createFolderIfNotExists,
    createComponentFile,
};