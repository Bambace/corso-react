const path = require('path');
const { createFolderIfNotExists, createComponentFile } = require('./fileBuilder');

module.exports = function main() {
  console.log('🧙‍♂️ You Shall Not Copy - CLI Tool Booting Up...');

  const allComponents = process.argv[2];

  if (!allComponents) {
    console.log('⚠️ Provide at least one component name, fool!');
    process.exit(1);
  }

  const componentNames = allComponents.split(",").map(name => name.trim());

  createFolderIfNotExists(path.join('src', 'components'));

  for (let componentName of componentNames) {
    createFolderIfNotExists(path.join('src', 'components', componentName));
    // create .jsx and .css file
    createComponentFile(path.join('src', 'components', componentName), componentName, 'jsx');
    createComponentFile(path.join('src', 'components', componentName), componentName, 'css');
  }

};